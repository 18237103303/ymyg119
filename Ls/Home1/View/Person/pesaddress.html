
<link rel="stylesheet" type="text/css" href="__PUBLIC__/home/assets/css/pol_base.css">
<link rel="stylesheet" type="text/css" href="__PUBLIC__/home/assets/css/pol_leftsidebar.css">
<link rel="stylesheet" type="text/css" href="__PUBLIC__/home/assets/css/pol3.css">
<script src="__PUBLIC__/home/assets/js/PCASClass.js"></script>
<!--header-->
<div class="header">
    <div class="header_wrap">

        <div class="logo1">
            <a href="/"><img src="__PUBLIC__/home/assets/images/logo1.png" alt=""></a>
        </div>

        <div class="menu">
            <ul>
                <li><a href="{:U('Index/index')}">首页</a></li>
                <li><a href="{:U('Person/pesinfoshow')}">账号设置</a></li>
                <!-- <li><a href="">我是商家</a></li> -->
            </ul>
        </div>

 <!--        <div class="search">
            <form>
                <p><input type="text" value="输入产品名称" onFocus="javascript:this.value = ''"><a href="">搜索</a></p>
            </form>
        </div> -->

    </div>
</div>
<!--header-->



<!--main-->
<div class="main">
    <div class="main_wrap">
        <include file="Public:personleft" />

        <div class="main_r">
            <div class="main_bt">
                <ul>
                    <li>
                        <div class="bt1">
                            <p>可用积分</p>
                            <span>{$showcou['jf']|default=0}</span>
                            <a>积分</a>
                        </div>
                    </li>
                    <li>
                        <div class="bt1">
                            <p>收藏</p>
                            <span>{$showcou['shop']}<i>店铺</i></span>
                            <a href="{:U('Person/shopcon')}">查看收藏</a>
                        </div>
                    </li>
                    <li>
                        <div class="bt1">
                            <p>收藏</p>
                            <span>{$showcou['goods']}<i>宝贝</i></span>
                            <a href="{:U('Person/goodscon')}">查看收藏</a><!-- <i><a href="">提现</a></i> -->
                        </div>
                    </li>
                    <li>
                        <div class="bt4">
                            <p>账户安全</p>
                            <div class="bt4_1"><span>一般</span><img src="__PUBLIC__/home/assets/images/pol_icon2.png" alt=""><i><a href="">提升></a></i></div>
                            <div class="bt4_2"><p><a class="a2" href=""><span>手机:</span>13318****850</a></p><p><a class="a3" href=""><span>邮箱:</span> 未绑定</a></p></div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="shop">
                <h4>收货地址管理</h4>
                <h3>添加收货地址</h3>
                <div class="shop1">
                    <h5><div id="success1"></div></h5>
                    <h5><a href="">新增收货地址</a><span>均为必填项</span></h5>
                    <form action="" method="post" name="form1" id="form1">
                        <p><label>所在地区</label>
                            <select name="province" id="province"></select>
                            <select name="city" id="city"></select>
                            <select name="area" id="area"></select>
                        </p>
                        <p><label>详细地址</label>
                            <textarea style="font-size:12px;"  name="xxxx" rows="5" id="ms" placeholder="建议您如实填写详细收货地址，例如街道名称，门牌号码，楼层和房间号等信息" onFocus="javascript:this.value = ''" onblur="detail()"></textarea>
                        </p><h5><div id="detail"></div></h5> 

                        <p><label>邮政编码</label>
                            <input type="text" id="youzheng" placeholder="如您不清楚邮政区号，请填写000000" onFocus="javascript:this.value = ''" name="postcode" onblur="code()"></p>
                        <h5><div id="pscode"></div></h5>
                        <p><label>收件人姓名</label>
                            <input class="in1" id="name" type="text" placeholder="长度不超过25个字符" onFocus="javascript:this.value = ''" name="name" onblur="xingming()"></p>
                        <h5><div id="showname"></div></h5> 						
                        <p><label>手机号码</label>
                            <input class="in2"  name="tel" id="shouji" type="text"  onFocus="javascript:this.value = ''" onblur="phone()">
                        <h5><div id="show"></div></h5>
                        </p>
                        <p><input class="check" type="checkbox" name="status" value="3" id="status" >设置为默认收货地址</p>
                        <p><button style="margin-left:105px;color:#FFF; font-size:12px; line-height:30px; border:none; cursor:pointer;
background-color:#ff4001;border-radius:2px; width:80px; text-align:center; display:block;" type="submit" onclick="saveadd()">保存</button></p>
                    </form>
                </div>
                <script language="javascript" defer>
                    new PCAS("province", "city", "area", "吉林省", "白城市", "大安市");
                    //new PCAS("province1","city1","area1","吉林省","吉林市","龙潭区");
                </script>
                <div class="moren">
                    <p>默认收货地址</p>
                    <table cellpadding="0"; cellspacing="0;" style="border-collapse:collapse;">
                        <tr style="height:30px; line-height:40px; background-color:#f2f2f2;">
                            <td style=" width:40px;">收货人</td>
                            <td style=" width:220px;">所在地</td>
                            <td style=" width:220px;">详细地址</td>
                            <td style=" width:50px;">邮编</td>
                            <td style=" width:80px;">电话/手机</td>
                            <td style=" width:100px;">操作</td>
                            <td style="width:80px;"></td>
                        </tr>

                        <tr>
                            <td>{$default.name}</td>
                            <td>{$default.area}</td>
                            <td>{$default.xxxx}</td>
                            <td>{$default.postcode}</td>
                            <td><php>$string=$default['lianxi'];echo substr_replace($string,'*****',2,8);</php></td>
                        <td><a href="{:U('Person/edit',array('id'=>$default['id']))}">修改</a>|<a href="{:U('Person/delete',array('id'=>$default['id']))}" onclick="return confirm('确定要删除改地址吗？')">删除</a></td>
                        <td><span><a href="{:U('Person/edit',array('id'=>$default['id']))}">默认地址</a></span></td>
                        </tr>

                    </table>
                </div>


                <div class="moren">
                    <p>新增收货地址</p>
                    <table cellpadding="0"; cellspacing="0;" style="border-collapse:collapse;">
                        <tr style="height:30px; line-height:40px; background-color:#f2f2f2;">
                            <td style=" width:40px;">收货人</td>
                            <td style=" width:220px;">所在地</td>
                            <td style=" width:220px;">详细地址</td>
                            <td style=" width:50px;">邮编</td>
                            <td style=" width:80px;">电话/手机</td>
                            <td style=" width:100px;">操作</td>
                            <td style="width:80px;"></td>
                        </tr>
                        <volist name="new" id="newadd">
                            <tr>
                                <td>{$newadd.name}</td>
                                <td>{$newadd.area}</td>
                                <td>{$newadd.xxxx}</td>
                                <td>{$newadd.postcode}</td>
                                <td><php>$nwdetail=$newadd['phone'];echo substr_replace($string,'*****',2,8);</php></td>
                            <td><a href="{:U('Person/edit',array('id'=>$newadd['id']))}">修改</a>|<a href="{:U('Person/delete',array('id'=>$newadd['id']))}" onclick="return confirm('确定要删除该地址吗？')">删除</a></td>
                            <!-- <td><span><a href="">待审核</a></span></td> -->
                            </tr>
                        </volist>
                    </table>
                </div>

                <div class="moren">
                    <p>历史收货地址</p>
                    <table cellpadding="0"; cellspacing="0;" style="border-collapse:collapse;">
                        <tr style="height:30px; line-height:40px; background-color:#f2f2f2;">
                            <td style=" width:40px;">收货人</td>
                            <td style=" width:220px;">所在地</td>
                            <td style=" width:220px;">详细地址</td>
                            <td style=" width:50px;">邮编</td>
                            <td style=" width:80px;">电话/手机</td>
                            <td style=" width:100px;">操作</td>
                            <td style="width:80px;"></td>
                        </tr>
                        <volist name="giveup" id="givup">
                            <tr>
                                <td>{$givup.name}</td>
                                <td>{$givup.area}</td>
                                <td>{$givup.xxxx}</td>
                                <td>{$givup.postcode}</td>
                                <td><php> $string=$givup['lianxi'];echo substr_replace($string,'*****',2,8);</php></td>
                            <td><a href="{:U('Person/edit',array('id'=>$givup['id']))}">修改</a>|<a href="{:U('Person/delete',array('id'=>$givup['id']))}" onclick="return confirm('确定要删除改地址吗？');">删除</a></td>
                            <td></td>
                            </tr>
                        </volist>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!--main-->
    <script>
        //地址的添加
        function saveadd() {
            var detail = $('#ms').val();
            var postcode = $('#youzheng').val();
            var name = $('#name').val();
            var shouji = $('#shouji').val();
            var status = $('#status').val();
            var province = $('#province').val();
            var city = $('#city').val();
            var area = $('#area').val();
            var url = "{:U('Person/pesaddress')}";
            if (detail == "" || postcode == "" || name == "" || status == "" || province == "" || city == "" || area == "") {
                alert('请把信息填写完整！');
                return false;
            } else {
                $.ajax({
                    type: "post",
                    url: url,
                    data: {xxxx: detail, postcode: postcode, name: name, lianxi: shouji, status: status, province: province, city: city, area: area},
                    dataType: 'json',
                    //beforeSend:function(){$('#myphone').html('[查询中...]')},
                    success: function (msg) {
                        $("#success1").html(msg);
                    }
                });
            }
        }
        //手机验证

        function phone() {
            var phone = $("#shouji").val();
            $.ajax({
                type: "post",
                url: "{:U('Person/phone')}",
                data: {phone: phone},
                dataType: 'json',
                //beforeSend:function(){$('#myphone').html('[查询中...]')},
                success: function (msg) {
                    $("#show").html(msg);
                }
            });
        }




        //邮箱验证

        function code() {

            var email = $("#youzheng").val();

            $.ajax({
                type: "post",
                url: "{:U('Person/email')}",
                data: {email: email},
                dataType: 'json',
                //beforeSend:function(){$('#myemail').html('[查询中...]')},
                success: function (msg) {
                    $("#pscode").html(msg);
                }
            });
        }
        //姓名验证
        function xingming() {
            var name = $("#name").val();
            $.ajax({
                type: "post",
                url: "{:U('Person/xingming')}",
                data: {name: name},
                dataType: 'json',
                //beforeSend:function(){$('#myphone').html('[查询中...]')},
                success: function (msg) {
                    $("#showname").html(msg);
                }
            });
        }
        //详细信息
        function detail() {
            var detail = $("#ms").val();
            $.ajax({
                type: "post",
                url: "{:U('Person/detail')}",
                data: {detail: detail},
                dataType: 'json',
                //beforeSend:function(){$('#myphone').html('[查询中...]')},
                success: function (msg) {
                    $("#detail").html(msg);
                }
            });
        }

    </script>